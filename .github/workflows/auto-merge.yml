name: Auto merge when label to "to deploy" (dev)

on:
  pull_request:
    types: [ labeled ]
#     branches: 
#       - preview/dev

env:
  target_branch: preview/dev

jobs:

  build:
    if: github.event.label.name == '[workflow] to deploy' && github.event.pull_request.base.ref == env.target_branch
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Send greeting
      run: |
        echo ">> ${{ toJSON(github.event.pull_request) }}"

#   Job1:
#     name: Job1
#     runs-on: ubuntu-latest
#     if: github.event.pull_request.base.ref == 'master'   # check the target branch if it's master
#     steps:
#         - name: trigger
#           run: echo "Hii"
